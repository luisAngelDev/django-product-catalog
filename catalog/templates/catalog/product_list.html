{% extends 'catalog/base.html' %} 
{% load static %} 

{% block title %}
Inicio 
{% endblock %} 

{% block content %}

    <section class="container py-5">
        <h2 class="text-center m-5 text-white">Catálogo de Productos</h2>
        <div class="row">
            {% for product in products %}
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text">{{ product.description }}</p>
                        <p class="fw-bold">S/ {{ product.price }}</p>
                    </div>

                    <!-- Botón WhatsApp flotante dentro de la tarjeta -->
                    <a href="https://wa.me/51999999999?text=Hola,%20estoy%20interesado%20en%20el%20producto%20{{ product.name }}"
                        class="btn btn-success rounded-circle d-flex justify-content-center align-items-center whatsapp-btn"
                        target="_blank"
                        title="Consultar por WhatsApp">
                        <i class="bi bi-whatsapp"></i>
                    </a>

                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <section class="container py-5" id="contact" class="bg-dark text-white p-5 rounded">
        
        <h2 class="text-center text-white mb-5">Contáctame</h2>

        {% if mensaje_exito %}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                {{ mensaje_exito }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
            </div>
        {% endif %}

        <div class="row align-items-stretch">
            <!-- Columna del formulario -->
            <div class="col-md-6 mb-4 d-flex">



                <form method="post" class="bg-secondary p-5 rounded w-100">
                    {% csrf_token %}
    
                    <div class="mb-3">
                        <label for="{{ form.nombre.id_for_label }}" class="form-label text-white">{{ form.nombre.label }}</label>
                        {{ form.nombre }}
                    </div>
    
                    <div class="mb-3">
                        <label for="{{ form.correo.id_for_label }}" class="form-label text-white">{{ form.correo.label }}</label>
                        {{ form.correo }}
                    </div>
    
                    <div class="mb-3">
                        <label for="{{ form.mensaje.id_for_label }}" class="form-label text-white">{{ form.mensaje.label }}</label>
                        {{ form.mensaje }}
                    </div>
    
                    <div class="text-center">
                        <button class="btn btn-success" type="submit">Enviar Correo</button>
                    </div>
                </form>
            </div>

            <!-- Columna del mapa -->
            <div class="col-md-6">
                <div class="ratio ratio-4x3">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m21!1m12!1m3!1d4641.752829656116!2d-76.98801038207176!3d-11.958341760896346!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m6!3e0!4m0!4m3!3m2!1d-11.957056099999999!2d-76.9860583!5e0!3m2!1ses!2spe!4v1754429099941!5m2!1ses!2spe" 
                    width="600" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade"
                    ></iframe>
                  </div>
            </div>
        </div>

    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const alerta = document.querySelector('.alert');
            if (alerta) {
                setTimeout(() => {
                    alerta.classList.remove('show');
                    alerta.classList.add('hide');
                }, 5000);
            }
        });
    </script>



{% endblock %}
